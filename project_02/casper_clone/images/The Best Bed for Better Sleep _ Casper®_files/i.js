(function() { function bxBootstrap() {
	if (!(window.bouncex&&bouncex.website)) {
		var pushedData = [];
		if(window.bouncex && bouncex.push && bouncex.length){
			pushedData = bouncex;
		}
		window.bouncex = {};
		bouncex.pushedData = pushedData;
		bouncex.website = {"id":1115,"cookie_name":"bounceClientVisit1115","domain":"casper.com","ct":"bind_to_domain","ally":0,"ei":1,"tcjs":"","cjs":"/* MW: track sessions https://www.wrike.com/open.htm?id=227974108 */\nvar currentVID = bouncex.cookie.vid;\nvar lastVID = bouncex.vars.session_vid;\nvar lastCount = bouncex.vars.session_count;\n\nif (lastVID !== currentVID) {\n    bouncex.setVar('session_vid', currentVID); // update to current VID\n    bouncex.setVarAndReload('session_count', lastCount + 1); // increase count\n}\n\nbouncex.infoStore = {\n\tsessionStorageIdentifier: 'bxInfoStore',\n\tset: function(data) {\n\t  var hashedData = bouncex.lz.compressToURI(JSON.stringify(data));\n\t  try {\n\t\tsessionStorage.setItem(this.sessionStorageIdentifier, hashedData);\n\t  } catch(e) {\n\t\tbouncex.err('session storage failure');\n\t  }\n\t},\n\tget: function() {\n\t  var email = sessionStorage.getItem(this.sessionStorageIdentifier);\n\t\t  return email ? JSON.parse(bouncex.lz.decompressFromURI(email)) : '';\n\t},\n\tinfoIsStored: function() {\n\t  return !!sessionStorage.getItem(this.sessionStorageIdentifier);\n\t},\n\tpopulateFields: function(fields) {\n\t  if (!this.infoIsStored()) return;\n\t  \n\t  var data = this.get();\n\t  for (var field in fields) {\n\t\tif (fields.hasOwnProperty(field)) {\n\t\t  fields[field].val(data[field]);\n\t\t}\n\t  }\n\t}\n  };\n  \n/* https://www.wrike.com/open.htm?id=391680879 */\nif (bouncex.state.mobile) {\n\tbouncex.off(jQuery('button[class*=BuyBar__add-to-cart]'), 'click.bx-cta');\n\tbouncex.on(jQuery('button[class*=BuyBar__add-to-cart]'), 'click.bx-cta', function() {\n\t\tbouncex.setVarAndReload('native_scroll_to_top_button', true);\n\t\tbouncex.off(jQuery('button[class*=BuyBar__add-to-cart]'), 'click.bx-cta');\n\t});\n}","force_https":false,"waypoints":false,"content_width":0,"gai":"","swids":"","sd":0,"ljq":"auto","campaign_id":0,"is_preview":false,"aco":{"first_party_limit":"3500","local_storage":"1"},"cmp":{"gdpr":1,"gmp":0,"whitelist_check":0},"burls":[],"ple":false,"fbe":false,"mas":1,"map":1,"gar":true,"ete":1,"ettm":false,"etjs":"bouncex.et.item.requireImageLoad = false;\n\n\n// EVENT HELPERS\nfunction getMatchIfExists(match) {\n  if (match && match.length > 1) { return match[1]; }\n  return '';\n}\n\nfunction getIdFromUrl(url){\n    url = bouncex.utils.url.allowParams(['productType'], url).replace('/v2/','').replace('-v2/','');\n    var urlToIdRegex = /([^=\\/]*)\\/*$/;\n  var buyUrlToIdRegex = /([a-z-]+)\\/buy[\\/|-]/;\n  url = url.indexOf('productType') === -1 ? url.split('?')[0] : url;\n\n  if (typeof url != 'string'){ return false; }\n  var idMatch = url.indexOf('/buy') > -1 && !url.includes('productType') ? url.match(buyUrlToIdRegex) : url.match(urlToIdRegex);\n  if (idMatch && idMatch[1]){\n    return idMatch[1];\n  }\n}\n\nfunction isEmptyVal(val) {\n  var nil = val === null;\n  var undef = typeof val === 'undefined'; \n  var blank = val === '';\n  var notTrue = val === false;\n  return nil || undef || blank || notTrue ? true : false;\n}\n\nfunction noEmptyFields(eventObj) {\n  for (var prop in eventObj) {\n    if (eventObj.hasOwnProperty(prop) && isEmptyVal(eventObj[prop])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction fireWhenStableData(getDataFunc, eventName) {\n  var brokenMobileMattressPage = bouncex.state.mobile \n      && window.location.href.indexOf('mattresses') > -1\n      && window.location.href.indexOf('v2') > -1;\n      \n//  if (brokenMobileMattressPage) { return; }    \n  this.dataCache = {};\n  var dataInterval =  setInterval(function() {\n    var data = getDataFunc();\n    if (!data) return;\n    var dataString = JSON.stringify(data);\n    this.dataCache[dataString] ? this.dataCache[dataString]++ : this.dataCache[dataString] = 1;\n\n    if (this.dataCache[dataString] > 2) {\n      if (hasNotTrackedData(dataString) && noEmptyFields(data)) {\n        pushToEventStream(eventName, data);\n        addToBxTrackedData(dataString);\n      }\n\n      clearInterval(dataInterval);\n    }\n\n  }.bind(this), 800);\n}\n\nfunction hasNotTrackedData(dataString) {\n  window.bxTrackedData = window.bxTrackedData ? window.bxTrackedData : {};\n  return window.bxTrackedData[dataString] ? false : true;\n}\n\nfunction addToBxTrackedData(dataString) {\n  window.bxTrackedData = window.bxTrackedData ? window.bxTrackedData : {};\n  window.bxTrackedData[dataString] = true;\n}\n\nfunction pushToEventStream(eventName, data) {\n  bouncex.push([eventName, data]);\n}\n\nfunction filterUniquesInArr(value, index, self) { \n  return self.indexOf(value) === index;\n}\n// END EVENT HELPERS\n\n\n// CATEGORY\nvar listPageTileMattressSelector = 'div[class*=MattressGrid__grid-item],div[class*=CompareTable__features-column-container], [data-qa=\"product-cell\"], [data-qa=\"product-grid-item\"]';\nvar listPageTileNonMattressSelector = 'div[class*=ProductCards__product-card-container]';\nvar allListPageTileSelector = listPageTileMattressSelector + ', ' + listPageTileNonMattressSelector;\nvar mattressPageDescriptionSelector = 'div[class*=CompareTable__features-column-container]';\nvar mattressPageConstructionSelector = 'div[class*=CompareTable__construction-section-inner]';\nvar matttessPageSmallImageSelector = 'div[class*=CompareTable__heading-image-container]';\nvar quickviewCartSelector = 'div[class*=Cart__container--open]';\n\nfunction fireCategoryTrackingIfCatPage() {\n  if (bouncex.vars.ibx_page_type === 'category') {\n    fireWhenStableData(getCategoryData, 'view category');\n  }\n}\n\nfunction startHoverItemListenerIfCatPage() {\n  if (bouncex.vars.ibx_page_type === 'category') {\n    bouncex.et.onHover(listPageTileMattressSelector, function($el){\n      var itemId = getIdFromCategoryItem($el);\n      if (itemId) {\n        pushToEventStream('hover item', { 'item:id': itemId });\n      }\n    });\n  }\n}\n\nfunction getCategoryData() {\n  return {\n    'items:ids' : getCategoryItemIds(),\n    'page:url' : getCategoryPageUrl(),\n    'page:title' : getCategoryTitle(),\n  };\n}\n\nfunction getCategoryItemIds() {\n  var items = jQuery(listPageTileMattressSelector);\n  var itemIds = [];\n  for (var i = 0; i < items.length; i++) {\n    var id = getIdFromCategoryItem(items.eq(i));\n    if (id) {\n      if(items.eq(i).find('[class*=\"Title-\"]').length > 0){\n        var itemName = items.eq(i).find('[class*=\"Title-\"]').text().toLowerCase();\n        if(itemName.indexOf('supima') > -1){\n          itemIds.push('cool-supima-' + id);\n              } else if(itemName.indexOf('airy') > -1){\n          itemIds.push('airt-' + id);\n              } else if(itemName.indexOf('weightless') > -1){\n          itemIds.push('weightless-' + id);\n              } else {\n                  itemIds.push(id);\n              }\n            } else {\n        itemIds.push(id);\n            }\n    }\n  }\n  return itemIds.join(',');\n}\n\nfunction getCategoryPageUrl() {\n  return bouncex.utils.getOrigin() + window.location.pathname;\n}\n\nfunction getCategoryTitle() {\n  return bouncex.vars.ibx_prod_category || \"Home\";\n}\n\nfunction getIdFromCategoryItem($categoryItem) {\n  var id = getIdFromUrl($categoryItem.find('a:first()').attr('href'));\n  return makeLocaleId(id);\n}\n\nfunction initHoverOnCategoryItems() {\n  bouncex.et.onHover(listPageTileMattressSelector, function($el){\n  var itemId = getIdFromCategoryItem($el);\n  pushToEventStream('hover item', {'item:id': itemId});\n  });\n}\n\nfunction initHoverOnCategoryMattressDetails() {\n  setHoverOnCategoryMattressDetailEvent(mattressPageDescriptionSelector);\n  setHoverOnCategoryMattressDetailEvent(mattressPageConstructionSelector);\n  setHoverOnCategoryMattressDetailEvent(matttessPageSmallImageSelector);\n}\n\nfunction setHoverOnCategoryMattressDetailEvent(selector) {\n  bouncex.et.onHover(selector, function($el){\n  var index = getIndexOfCategoryMattressDetailEleFromList(selector, $el);\n  var itemId = getCorrespondingMattressIdByIndex(index);\n  pushToEventStream('hover item', {'item:id': itemId});\n  });\n}\n\nfunction getIndexOfCategoryMattressDetailEleFromList(listSelector, $detail) {\n  return jQuery(listSelector).index($detail);\n}\n\nfunction getCorrespondingMattressIdByIndex(index) {\n  var $mattress = jQuery(listPageTileMattressSelector).eq(index);\n  return getIdFromCategoryItem($mattress);\n}\n// END CATEGORY\n\n/* CART TRACKING */\nfunction initCartTrackingIfNotCheckout() {\n  setTimeout(function() {\n    var isNotCheckout = bouncex.vars.ibx_page_type !== 'american checkout';\n    if (isNotCheckout) {\n      initBxCart();\n\n      setInterval(function() {\n        updateCartIfDifferentCount();\n        // we dont want to track empty cart when user hits the page from a replenishment when logged in\n        if (!bouncex.utils.getParam('bx_user_login')) {\n          initTrackEmptyCartInterval(); \n        }\n      }, 1200);\n    }\n  }, 1800);\n}\n\nfunction initBxCart() {\n  bouncex.et.cart.init({\n  cartCountVariable: 'cart_qty',\n  replenish: replenishCart,\n  storeValues: ['count', 'token', 'items'],\n  replenishmentType: 'cookie'\n  });\n}\n\nfunction replenishCart(cart) {\n  bouncex.log('Tracked Cart Items[0]: ', cart.items[0])\n  bouncex.log('Tracked Cart Token: ', cart.token)\n  if (cart.token == 'LoggedIn') {\n    window.location.href = '/login?bx_user_login=true';\n  } else {\n    bouncex.log('%c Trying to replen', 'color:magenta')\n    bouncex.utils.cookies.create({\n      name: 'guest_token',\n      value: cart.token,\n      domain: ''\n    });\n    window.location.href = '/cart' + '?bx_replen=true';\n  }\n  \n}\n\nfunction updateCartIfDifferentCount() {\n  var oldCount = getOldCartCount();\n  var newCount = getNewCartCount();\n  var cart = getCartFromQuickviewOrCartPage();\n  cart.token = getCartTokenFromCookie();\n  if (newCount > oldCount && cart.items.length != 0) {\n    cart.addToCart = true;\n    bouncex.et.cart.update(cart);\n  } else if (newCount < oldCount && newCount !== 0) {\n    bouncex.et.cart.update(cart);\n  }\n}\n\nfunction getOldCartCount() {\n  return bouncex.et.cart.getCart().count || 0;\n}\n\nfunction getNewCartCount() {\n  return bouncex.et.cart.getCount();\n}\n\n\n// function getCartFromQuickviewOrCartPage() {\n//  var cartItems = jQuery('div[class*=ProductCard__container]');\n//  var cartObj = {\n//    'count': 0,\n//    'items': [],\n//  };\n//  cartItems.each(function() {\n//    var $item = jQuery(this);\n//    var itemQty = parseInt($item.find('[class*=ProductCard__quantity-count]').text());\n//    var itemId = getItemIdFromCartItem($item);\n//    if(itemId){\n//      cartObj.items.push({ id: itemId, count: itemQty });\n//    }\n//    cartObj.count += itemQty;\n//  });\n//  return cartObj;\n// }\n\n////////////////////  https://casper.com/pillows/?bxdev\n\nfunction getCartFromQuickviewOrCartPage() {\n  var cartItems = jQuery('div[class*=LineItemCard]');\n  var cartObj = {\n    'count': 0,\n    'items': [],\n  };\n  cartItems.each(function() {\n    var $item = jQuery(this);\n    var itemQty = parseInt($item.find('[class*=QuantityCount]').text());\n    var itemId = getItemIdFromCartItem($item);\n\n    if(itemId){\n      cartObj.items.push({ id: itemId, count: itemQty });\n    }\n    cartObj.count += itemQty;\n  });\n  return cartObj;\n}\n\nfunction getItemIdFromCartItem($item) {\n  var prodName = $item.find('[class*=ProductName]').text().trim();\n  var baseId = getIdFromCartName(prodName);\n  var color = getCartItemColor($item);\n  var excludeColor = ['airy-linen', 'weightless-cotton', 'cool-supima', 'platform-bed', 'nightstand', 'glow-light'];\n  // exclude certain ids that contain materials from mapping colors;\n  if(baseId){\n    excludeColor.forEach(function(material){\n      if(baseId.indexOf(material) > -1){\n        color = '';\n      }\n    });\n\n    if (color) {\n      return baseId + '-' + color;\n    }\n  }\n\n  \n  return baseId;\n}\n\n// Unfortunately there is no other way to get item in cart since there is no link and images aren't representative\n// of unique item.\nfunction getIdFromCartName(prodName) {\n  var isUSA = bouncex.vars.ibx_site_locale === 'usa';\n  var cartNameToIdMap = {\n    'The Wave': 'casper-wave',\n    'The Casper': 'casper',\n    'The Essential': 'casper-essential',\n    'The Pillow': 'original-casper-pillow',\n    'The Pillowcase Set': 'pillowcase-set',\n    'Supima Pillowcase Set': 'cool-supima-pillowcase',\n    'The Duvet Cover': 'duvet-cover',\n    'Supima Duvet Cover': 'cool-supima-duvet-cover',\n    'The Sheet Set': 'sheets',\n    'Supima Sheet Set': 'cool-supima-sheet-set',\n    'The Down Duvet': 'duvet-inserts',\n    'The Adjustable Base': 'adjustable-bed-frames',\n    'The Foundation': 'mattress-foundation',\n    'The Metal Bed Frame': 'metal-bed-frame',\n    'The Mattress Protector': 'mattress-protector',\n    'The Dog Mattress': 'dog-beds',\n    'The Dog Bed': 'dog-beds',\n    'Woolly': 'woolly-magazine',\n    'Pool Floatie': 'pool-floatie',\n    'Nap Pillow': 'nap-pillow',\n    'Linen Sheet Set': 'airy-linen-sheet-set',\n    'Linen Duvet Cover': 'airy-linen-duvet-cover',\n    'Linen Pillowcase Set': 'airy-linen-pillowcase',\n    'Linen Quilt': 'airy-linen-quilt',\n    'Weightless Sheet Set': 'weightless-cotton-sheet-set',\n    'Weightless Duvet Cover': 'weightless-cotton-duvet-cover',\n    'Weightless Pillowcase Set': 'weightless-cotton-pillowcase',\n    'The Platform Bed': 'platform-bed',\n    'The Nightstand': 'nightstand',\n    'The Humidity Fighting Duvet': 'humidity-fighting-duvet',\n    'The Down Duvet': 'down-duvet',\n    'Glow Light': 'glow-light',\n    'The Adjustable Pro': 'the-adjustable-pro',\n    'The Adjustable': 'the-adjustable',\n    'The Core Hybrid': 'casper',\n    'The Wave Hybrid': 'casper-wave',\n    'The Casper Hybrid': 'casper',\n    'Upholstered Bed Frame': 'upholstered-bed-frame',\n    'Premium Mattress Topper': 'mattress-topper',\n    'The Platform Bed Frame': 'platform-bed',\n    'The Headboard': 'platform-headboard',\n    'Down Pillow': 'down-pillow',\n    'Weighted Blanket': 'weighted-blanket',\n    'Foam Pillow': 'foam-pillow',\n    'Sateen Duvet Cover': 'sateen-duvet-cover',\n    'Sateen Sheet Set': 'sateen-sheet-set',\n    'Sateen Pillowcase Set': 'sateen-pillowcase',\n    'The Wave (2017 Model)': 'casper-wave-2017'\n  };\n  \n\n  if (cartNameToIdMap[prodName] === undefined) {\n    bouncex.err(prodName)\n    bouncex.err('Item Not Found In Id Map: Possible new product or name change has occured. Check cartNameToIdMap.', 'tracking.js');\n  }\n  return cartNameToIdMap[prodName];\n}\n\nfunction getCartItemColor($item){\n  var itemOptionText = $item.find('[class*=ProductCard__options]').text();\n  // If no color in UK/FR/US, return blank\n  if (itemOptionText.indexOf('Colour') === -1 &&\n    itemOptionText.indexOf('Couleur') === -1 &&\n    itemOptionText.indexOf('Color') === -1) {\n    return '';\n  }\n\n  var lastCol = itemOptionText.lastIndexOf(':');\n  var color = itemOptionText.substring(lastCol + 1).trim();\n  if (color) {\n    color = color.replace('/', '').toLowerCase();\n  }\n\n  return color;\n}\n\nfunction getCartTokenFromCookie() {\n  return bouncex.utils.cookies.read('guest_token');\n}\n\nfunction initTrackEmptyCartInterval() {\n  bouncex.et.setInterval(trackEmptyCart, 1000);\n}\n\nfunction trackEmptyCart() {\n  var oldCount = getOldCartCount();\n  var newCount = getNewCartCount();\n  if (newCount === 0 && newCount < oldCount && window.location.pathname.indexOf('checkout') === -1) {\n    bouncex.et.cart.update({\n      count: 0\n    });\n  }\n}\n\nfunction forceUpdateCartToken() {\n  if (window.location.pathname.indexOf('checkout') === -1) {\n      var cart = getCartFromQuickviewOrCartPage();\n      cart.token = getCartTokenFromCookie();\n      bouncex.et.cart.update(cart);\n  }\n}\n\n/* END CART TRACKING */\n\n/* LOGGED IN USER TRACKING */\n\nfunction isLoggedIn() {\n  return bouncex.vars.logged_in || (window.location.pathname.indexOf('checkout') > -1 && window.location.pathname !== \"/checkout/registration\");\n}\n\n\nfunction getLoggedInUser() {\n//var email = window.__STORE__.order ? window.__STORE__.order.email : window.localStorage ? window.localStorage['casper-email'] : null;\n  if (jQuery('#user-info span').length > 0) {\n    return jQuery('#user-info span').text();\n  }\n  if (window.localStorage) {\n    return window.localStorage['casper-email'];\n  }\n}\n\n\nfunction fireLoggedInUserEvent(userEmail){\n  if (userEmail) {\n    bouncex.push(['user', {\n      email: userEmail,\n      source: 'LoggedIn'\n    }]);\n    \n    bouncex.setv('identified_logged_in', true);\n    bouncex.setBounceCookie();\n  }\n}\n\nfunction initGetLoggedInUserIfLoggedIn() {\n//  if (loggedInCheckout()) {\n//     updateTokenOnCheckoutLogin(); \n//  }\n  if (!bouncex.vars.identified_logged_in && isLoggedIn()) {\n    var userEmail = getLoggedInUser();\n    bouncex.log(userEmail)\n    fireLoggedInUserEvent(userEmail);\n    initBxCart();\n    forceUpdateCartToken();\n  }\n}\n/* END LOGGED IN USER TRACKING */\n\n\n/* BEHAVIORAL WELCOME */\nfunction initFooterSubmitListener(cb) {\n  var isUSA = bouncex.vars.ibx_site_locale === 'usa';\n  if (isUSA && jQuery('button[class*=Snoozeletter__button]').length > 0) {\n    jQuery(document).one('click.bx', 'button[class*=Snoozeletter__button]', cb);\n  }\n}\n\nfunction fireRequestEmailEvent() {\n  var email = jQuery('input[class*=Snoozeletter__input]').val();\n  var parentInboxCampaignId = 611376;\n  bouncex.push(['requestemail', {\n    email: email,\n    campaignId: parentInboxCampaignId,\n    testmode: bouncex.vars.ibx_test ? 1 : 0\n  }]);\n}\n/* END BEHAVIORAL WELCOME */\n\nfunction onTrue(condition, callback, maxTries){\n  var tries = 0;\n  maxTries = maxTries || 5;\n  if (condition()){\n    callback();\n  }else{\n    var intId = bouncex.et.setInterval(function(){\n      if (condition()){\n        bouncex.et.stop(intId);\n        callback();\n      } else if (tries > maxTries){\n        bouncex.et.stop(intId);\n      }\n      tries ++;\n    });\n  }\n}\n\n\n\n// They have two urls, one without the images we need, don't track dog-beds. Yeah.\nfunction isNotDogBeds() {\n  return window.location.pathname.indexOf('dog-beds/') === -1;\n}\n\n\nfunction isIncludedHostname(hostname) {\n  var included = ['casper.com', 'spa-br-savecart-bx.casper-staging.com'];\n//, 'spa-br-savecart-bx.casper-staging.com' \n  return included.indexOf(hostname) > -1;\n}\n\n/****************** INIT TRACKING ****************/\n\nif (isIncludedHostname(window.location.hostname)) {\n  setTimeout(function() {\n    onTrue(getSiteLocale, initEventTracking);\n  }, 400);\n}\n\nfunction getSiteLocale() {\n  return bouncex.vars.ibx_site_locale\n}\n\nfunction initEventTracking() {\n  var isUSA = bouncex.vars.ibx_site_locale === 'usa';\n  var isCBD = window.location.href.toLowerCase().indexOf('cbd') > -1;\n\n  if (isUSA ) {\n    initGetLoggedInUserIfLoggedIn();\n    initCartTrackingIfNotCheckout();\n\n    if (isNotDetailPage()) {\n      startHoverItemListenerIfCatPage();\n      initHoverOnCategoryMattressDetails();\n      fireCategoryTrackingIfCatPage();\n\n      startCustomEventsIfMattressProductPage();\n      startProductColorChangeListenerIfProdPageAndNotGiftCard();\n      startProductOpenListenerIfProdPageAndNotGiftCard();\n      fireProductTrackingIfProdPageAndNotGiftCard();\n    }\n\n    initFooterSubmitListener(fireRequestEmailEvent);\n  }\n}\n\n/******************* ITEM TRACKING ***************/\n\nfunction isNotDetailPage() {\n  return window.location.pathname.indexOf('details') === -1;\n}\n\nfunction startCustomEventsIfMattressProductPage() {\n  var engUrl = jQuery('link[rel=alternate][hreflang=en-US]').attr('href') \n  || window.location.href;\n  var isMattressPage = engUrl ? engUrl.indexOf('mattresses') > -1 : false;\n  var isNapPillowPage = engUrl ? engUrl.indexOf('nap-pillow') > -1 : false;\n  var compareMattresses = engUrl ? engUrl.indexOf('mattresses/compare') > -1 : false;\n  if (isNapPillowPage || isMattressPage && bouncex.website.pts === 'product' && !compareMattresses ) {\n    var fullId = makeLocaleId(bouncex.vars.ibx_product_id);\n    initViewProductSpecListener(makeViewProductSpecEvent(fullId));\n    setItemViewedTimeEvent(30000, fullId);\n  }\n}\n\nfunction makeLocaleId(id) {\n  if (id) {\n    if (bouncex.vars.ibx_site_locale !== 'usa') {\n      id = bouncex.vars.ibx_site_locale + ':' + id;\n    }\n    return id;\n  }\n  return undefined;\n}\n\n/* CUSTOM INTENT EVENTS */\nfunction initViewProductSpecListener(cb) {\n  jQuery(window).on('scroll.bx-product-spec', function() {\n    var currentY = window.pageYOffset;\n    var productSpecY = jQuery('section[class*=SpecsV3__container]').length > 0 ?jQuery('section[class*=SpecsV3__container]').position().top : false;\n    if (productSpecY && currentY + 300 >= productSpecY) {\n      cb();\n      jQuery(window).off('scroll.bx-product-spec');\n    }\n  });\n}\n\nfunction makeViewProductSpecEvent(itemId) {\n  return function () {\n    bouncex.push(['view product specs', {\n      'item:id' : itemId,\n    }]);\n  };\n}\n\nfunction setItemViewedTimeEvent(ms, itemId) {\n  setTimeout(function() {\n    if (window.location.href.indexOf('buy-more') === -1) {\n        bouncex.push(['on page for ' + (ms/1000).toString() + ' seconds', {\n          'item:id' : itemId,\n        }]); \n    }\n    \n  }, ms);\n}\n/* END CUSTOM INTENT EVENTS */\n\nfunction startProductColorChangeListenerIfProdPageAndNotGiftCard() {\n  if (bouncex.website.pts === 'product' && isNotGiftCard()) {\n    var hasMulticolor = jQuery('div[class*=ColorSelect__swatch]').length > 0;\n    if (hasMulticolor) {\n      jQuery(document).on('click.bx', 'div[class*=ColorSelect__swatch]', fireProductTrackingIfProdPageAndNotGiftCard);\n    }\n  }\n}\n\nfunction isNotGiftCard() {\n  return window.location.href.indexOf('gift-card') === -1;\n}\n\nfunction startProductOpenListenerIfProdPageAndNotGiftCard() {\n  if (bouncex.website.pts === 'product' && isNotGiftCard()) {\n    var hasMultiOpener = jQuery('section[class*=SheetSeparatePurchaser__item]');\n    if (hasMultiOpener) {\n      jQuery(document).on('click.bx', 'section[class*=SheetSeparatePurchaser__item]', fireProductTrackingIfProdPageAndNotGiftCard);\n    }\n  }\n}\n\n\nfunction fireProductTrackingIfProdPageAndNotGiftCard() {\n  fireItemTrackingIfProdPageAndNotGiftCard();\n    fireViewItemTrackingIfProdPageAndNotGiftCard();\n}\n\nfunction fireItemTrackingIfProdPageAndNotGiftCard() {\n  var engUrl = jQuery('link[rel=alternate][hreflang=en-US]').attr('href');\n  if(!engUrl && jQuery('html[lang=\"en-US\"]')){\n      engUrl = jQuery('link[rel=\"canonical\"]').attr('href')\n  }\n  var buyMore = engUrl ? engUrl.indexOf('buy-more') > -1 : false;\n  if (bouncex.website.pts === 'product' && isNotGiftCard() && !buyMore && !bouncex.state.mobile) {\n    fireWhenStableData(getProductData, 'item');\n  }\n}\n\nfunction fireViewItemTrackingIfProdPageAndNotGiftCard() {\n  var engUrl = jQuery('link[rel=alternate][hreflang=en-US]').attr('href');\n  if (bouncex.website.pts === 'product' && isNotGiftCard()) {\n    fireWhenStableData(getProductId, 'view item');\n  }\n}\n\nfunction getProductData() {\n    var id = makeLocaleId(bouncex.vars.ibx_product_id);\n\n  if (bouncex.vars.ibx_copy && isEnglishString(bouncex.vars.ibx_copy) && id.indexOf('.com') === -1) {\n    return {\n      id: id,\n      copy: bouncex.vars.ibx_copy,\n      imageurl: bouncex.vars.ibx_image_url,\n      category: bouncex.vars.ibx_prod_category,\n      url: bouncex.vars.ibx_item_url,\n      instock: bouncex.vars.ibx_in_stock ? 1 : 0,\n    };\n  } else {\n    return {};\n  }\n}\n\nfunction isEnglishString(s){\n  var pattern = /^[\\sa-zA-Z0-9!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]*$/;\n  if (s.match(pattern)) {\n    return true;\n  }\n  return false;\n}\n\nfunction getProductId() {\n  var id = makeLocaleId(bouncex.vars.ibx_product_id);\n  if (id.indexOf('.com') === -1) {\n      return {\n        'item:id': id,\n      };\n  }\n  return false;\n}\n","dge":true,"bxidLoadFirst":false,"gbi_enabled":0,"gbi":{"rblocks":null},"bpush":false,"pt":{"cart":{"testmode":true,"val":[[{"activation":"js","prop":"","prop2":"","prop3":"","val":"window.location.pathname === '/cart/';"}]]},"category":{"testmode":false,"val":[[{"activation":"js","prop":"","prop2":"","prop3":"","val":"jQuery('span[data-page-type=\"category\"]').length > 0;"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"window.location.pathname === \"/pillows/\";"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"window.location.pathname === \"/mattresses/\" || window.location.pathname === \"/mattresses/v2/\";"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"window.location.pathname === \"/bedding/\" || window.location.pathname === \"/bedding/sheets/\" ||  window.location.pathname === \"/bedding/duvets/\";"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"window.location.pathname === \"/glow-light/\";"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"window.location.pathname === \"/bed-frames/\";"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"window.location.pathname === \"/adjustable-bed-frames/\";"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"window.location.pathname === \"/dog-beds/\";"}]]},"checkout":{"testmode":false,"val":[[{"activation":"js","prop":"","prop2":"","prop3":"","val":"document.querySelectorAll('nav[aria-label=\"Checkout steps\"]').length > 0;"}]]},"home":{"testmode":false,"val":[[{"activation":"js","prop":"","prop2":"","prop3":"","val":"document.querySelectorAll('meta[property=\"og:image\"]')[0].getAttribute('content').indexOf('homepage') > -1 && document.querySelectorAll('button[aria-label=\"Add to cart\"]').length === 0 && document.querySelectorAll('nav[aria-label=\"Checkout steps\"]').length === 0;"}]]},"product":{"testmode":false,"val":[[{"activation":"js","prop":"","prop2":"","prop3":"","val":"document.querySelectorAll('#page-top div[class*=PurchaserInfo]').length > 0;"},{"activation":"current_page_url","prop":"contains","prop2":"","prop3":"","val":"/buy/"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"window.location.pathname === \"/mattress-protector/\";"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"document.querySelectorAll('div[class*=BuyPageContainer__container___] button[class*=Button-]').length > 0;"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"document.querySelectorAll('button[aria-label=\"Add to cart\"]').length > 0;"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"document.querySelectorAll('button[class*=Purchaser__add-to-cart___]').length > 0;"},{"activation":"js","prop":"","prop2":"","prop3":"","val":"document.querySelectorAll('button[aria-label*=\"to cart\"]').length > 0;"}]]}},"els":null,"vars":[{"name":"seen_bx","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"bouncex.cookie.as>0","trigger":""},{"name":"bx_qa","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"window.location.href.indexOf('bx_qa') > -1 || null;","trigger":""},{"name":"cart_qty","polling":"all","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"(function() {\n  if (window.location.href.indexOf('/checkout') > -1) {\n    return Number(jQuery('[class^=CartCount]').text().replace(/[^0-9]/g, ''));\n  } else {\n    return Number(jQuery('button[aria-label*=\"Cart\"] span').text().replace(/[^0-9]/g, '')) || 0;\n  }\n})();","trigger":""},{"name":"cart_value","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"0","code":"Number(jQuery('[class*=\"CartSummary__item-value\"]:eq(0), [class*=\"Totalscss__SummaryItemValue\"]:eq(0)').text().replace(/[^0-9.]/g, '')) || 0;","trigger":""},{"name":"submitted_footer","polling":"all","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"jQuery('.Snoozeletter__form-thanks___2Kslj.Snoozeletter__active___P7PRh').is(':visible') ? true : null;","trigger":""},{"name":"prod_price","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"0","code":"jQuery('div[class*=PriceGroup]').length > 0 ? jQuery('div[class*=PriceGroup]').text() : jQuery('div[class*=_container] button[class*=Dropdown__selected-option]:eq(0) span:eq(1)').text();","trigger":""},{"name":"prod_name","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"","code":"jQuery('h1.ProductHeader__title___wY3mt').text() || jQuery('.BuyBar__product-name___2-Srk').text();","trigger":""},{"name":"prod_size","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"","code":"window.bx_selected_product && window.bx_selected_product.size || null;","trigger":""},{"name":"prod_review_stars","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"","code":"jQuery('div[class*=PurchaserRating]').text().split(\"(\")[0];","trigger":""},{"name":"logged_in","polling":"vars","persist":"no","page_types":[],"testmode":false,"default":"false","code":"jQuery('a[href=\"/account/\"]').length > 0;","trigger":""},{"name":"ever_logged_in","polling":"none","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"bouncex.vars.logged_in ? true : null;","trigger":""},{"name":"country","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"","code":"jQuery('html').attr('lang').split('-')[1] === 'CA' ? 'Canada' : jQuery('html').attr('lang').split('-')[1] === 'DE' ? 'Germany' : jQuery('html').attr('lang').split('-')[1] === 'FR' ? 'France' : jQuery('html').attr('lang').split('-')[1] === 'CH' ? 'Switzerland' : jQuery('html').attr('lang').split('-')[1] === 'AT' ? 'Austria' : jQuery('html').attr('lang').split('-')[1] === 'GB' ? 'United Kingdom' : jQuery('html').attr('lang').split('-')[1] === 'US' ? 'United States' : '';","trigger":""},{"name":"page_type","polling":"vars","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function () {\n    var pathName = window.location.pathname;\n    var url = window.location.href;\n    var productPage;\n\n    if (typeof window.jQuery === 'undefined') {\n        productPage = pathName.match('(/nightstand|/buy/|/platform-bed/)');\n    } else {\n        productPage = jQuery('div[class*=Purchaser],section[class*=PDP],div[class*=BuyPage], div[itemtype*=\"/Product\"]').length > 0 || jQuery('title').text().indexOf('Bed Frames') > -1 || jQuery('title').text().indexOf('Nap Pillow') > -1 || pathName.match('(/nightstand|/buy/|/platform-bed/)');\n    }\n\n    var homePaths = ['/ca/en/','/','/ca/fr/','/de/de/','/fr/fr/','/at/de/','/ch/de/','/ch/fr/','/uk/en/', '/m/', '/m/v2/', '/m/home/', '/home-v1/', '/m/home-v1/', '/m/home-v2/'];\n    var categoryPaths = ['/ca/en/mattresses/', '/mattresses/', '/ca/en/products/', '/products/', '/ca/fr/matelas/', '/ca/fr/produits/', '/de/de/matratzen/', '/fr/fr/matelas/', '/at/de/matratzen/', '/ch/de/matratzen/', '/ch/fr/matelas/', '/uk/en/mattresses/', '/bed-frames/', '/pillows/'];\n    var blogPage = url.indexOf('blog.') > -1;\n    var homePage = homePaths.indexOf(pathName) > -1;\n    var categoryPage = categoryPaths.indexOf(pathName) > -1 || (pathName.indexOf('/bedding/') > -1 && pathName.indexOf('/buy/') === -1 && jQuery('div[itemtype*=\"/Product\"]').length === 0);\n    var cartPage = window.__STORE__.order.currentCheckoutStep !== undefined;\n    var otherNotTrackedPage = window.location.pathname.indexOf('/reviews/') > -1 || window.location.pathname.indexOf('/avis/') > -1 || window.location.pathname.indexOf('/account') > -1 || window.location.pathname.indexOf('/returns') > -1 || window.location.pathname.indexOf('/mattress-size-comparison-guide') > -1;\n\n\tif (productPage && !blogPage && !homePage && !categoryPage && !cartPage && !otherNotTrackedPage) {\n\t\treturn 'product';\n\t} else if (blogPage) {\n\t    return 'blog';\n\t} else if (homePage) {\n\t\treturn 'home';\n\t} else if (categoryPage) {\n        return 'category';\n    } else if (otherNotTrackedPage){\n        return false;\n    } else if (cartPage){\n        return 'cart';\n    }\n})();\n","trigger":""},{"name":"ibx_test","polling":"none","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"window.location.href.indexOf('ibx_test') > -1 || null;","trigger":""},{"name":"prod_category","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"window.__STORE__.product.productCategory;","trigger":""},{"name":"prod_image","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function () {\n  var imgTag = jQuery('div[class*=\"Gallery__slides\"] > :first-child > img');\n  var imgSrc = imgTag.attr('src');\n\n  if (imgTag && imgSrc) {\n    var baseImg = imgSrc.split('?')[0] + '?';\n    var paramsAndVals = [];\n    var allowedQsParams = ['auto', 'q', 'w'];\n    allowedQsParams.forEach(function(p) {\n    \tvar paramVal = bouncex.utils.getParam(p, imgSrc);\n    \tif (paramVal) {\n    \t\tparamsAndVals.push(p + '=' + paramVal);\n    \t}\n    });\n    return baseImg + paramsAndVals.join('&');\n  }\n  return '';\n})();\n","trigger":""},{"name":"cart","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":""},{"name":"identified_logged_in","polling":"none","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":""},{"name":"video_playing","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"jQuery('.wistia_popover_overlay').is(':visible')","trigger":""},{"name":"ibx_prod_category","polling":"vars","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function(){\n  var engUrl = jQuery('link[rel=alternate][hreflang=en-US]').attr('href');\n  if (engUrl && engUrl.indexOf('mattresses') > -1) {\n    return 'mattress';\n  } else {\n    return 'notmattress';\n  }\n})();","trigger":""},{"name":"is_logged_in_replen","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function(){\n  if (bouncex.utils.getParam('bx_user_login')) {\n    return true;\n  }\n  return false;\n})();","trigger":""},{"name":"ibx_site_locale","polling":"vars","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function() {\n\tfunction getLocaleFlag() {\n\t\treturn jQuery('span[class*=HeaderLocaleIcon__icon]').attr('data-icon') || jQuery('.Icon__icon___34QmX.Footer__locale-select-icon___1M8B-').attr('data-icon');\n\t}\n\n\tfunction getLocaleFromWindowVar() {\n\t\treturn window.__STORE__.i18n.locale;\n\t}\n\tvar splitPaths = window.location.pathname.split('/');\n\tvar localeFlag = getLocaleFlag();\n\tvar localeWindowVar = getLocaleFromWindowVar();\n\tvar engCheckout = (splitPaths.length > 1 && splitPaths[1] === 'checkout');\n\tif (localeFlag === 'flag-france' && localeWindowVar === 'fr-FR') {\n\t\treturn 'fr';\n\t} else if (localeFlag === 'flag-uk' && localeWindowVar === 'en-GB') {\n\t\treturn 'uk';\n\t} else if (localeFlag === 'flag-us' && localeWindowVar === 'en-US') {\n\t\treturn 'usa';\n\t} else if (!localeFlag && localeWindowVar === 'en-US') {\n\t    return 'usa';\n\t}\n\treturn null;\n})();","trigger":""},{"name":"ibx_is_sheets_separate","polling":"vars","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function(){\n\treturn jQuery('section[class*=SheetSeparatePurchaser__item]').length > 0;\n})();\n","trigger":""},{"name":"ibx_product_color","polling":"vars","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function() {\n\tvar currentColorText = jQuery('div[class*=ColorSelect__container]:visible').find('div[class*=ColorSelect__selected-color]').text();\n\tvar splitColor = currentColorText.split(': ');\n\tif (splitColor.length > 1) {\n\t\tsplitColor = splitColor[1].replace('/', '').toLowerCase();\n\t} else {\n\t  splitColor = '';\n\t}\n\treturn bouncex.utils.getParam('color') || splitColor;\n})();","trigger":""},{"name":"ibx_product_id","polling":"vars","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function(){\n    var urlToIdRegex = /([^=\\/]*)\\/*$/;\n    var buyUrlToIdRegex = /([a-z-]+)\\/buy[\\/|-]/;\n    var engUrl = prodTypeUrl(window.location.href) ?bouncex.utils.url.allowParams(['productType']) : jQuery('link[rel=alternate][hreflang=en-US]').attr('href')||window.location.href;\n    var baseId = engUrl && getIdFromUrl(engUrl);\n    \n    if (window.location.href.indexOf('casper-wave/buy/v2/') > -1 ) {\n        return 'casper-wave';\n    }\n    if (window.location.href.indexOf('casper/buy/v2/') > -1 ) {\n        return 'casper';\n    }\n    \n    if (window.location.href.includes('/bedding/sheets')) {\n        var material = jQuery('#page-header h1').length > 0 ? jQuery('#page-header h1').text().toLowerCase().replace(/[^(\\w\\s-)]+/g, '').split(' ').join('-') : '';\n        baseId =  bouncex.utils.url.getParam('productType') || 'set';\n        return material + '-' + baseId;\n    }\n    \n    bouncex.log('Base Id: ', baseId)\n    if (bouncex.vars.ibx_is_sheets_separate) {\n        baseId = jQuery('div[class*=SheetSeparatePurchaser__options]:visible').siblings('header[class*=SheetSeparatePurchaser__header]').find('h2').text().toLowerCase().replace(/ /g, '-');\n    }\n    if (bouncex.vars.ibx_product_color && !prodTypeUrl(engUrl)) {\n        return baseId + '-' + bouncex.vars.ibx_product_color;\n    }\n    \n    return baseId;\n    \n    function getIdFromUrl(url){\n        url = url.replace('/v2/','').replace('-v2','').replace('/v3/','').replace('-v3','');\n        url = url.indexOf('productType') === -1 ? url.split('?')[0] : url;\n        if (typeof url != 'string'){ return false; }\n        var idMatch = url.indexOf('/buy') > -1 && !url.includes('productType') ? url.match(buyUrlToIdRegex) : url.match(urlToIdRegex);\n        if (idMatch && idMatch[1]){\n            return idMatch[1];\n        }\n    }\n    \n    function prodTypeUrl(url){\n        return url.indexOf('/buy/?productType') >-1\n    }\n})();\n","trigger":""},{"name":"ibx_copy","polling":"vars","persist":"no","page_types":["product"],"testmode":false,"default":"false","code":"window.bx_product && window.bx_product.name || null;","trigger":""},{"name":"ibx_image_url","polling":"vars","persist":"no","page_types":["product"],"testmode":false,"default":"false","code":"window.bx_product && window.bx_product.image_url || null;","trigger":""},{"name":"ibx_item_url","polling":"vars","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function(){\n\treturn jQuery('link[rel=canonical]').attr('href') || bouncex.utils.getOrigin() + window.location.pathname;\n})();\n","trigger":""},{"name":"ibx_in_stock","polling":"vars","persist":"no","page_types":["product"],"testmode":false,"default":"false","code":"window.bx_product && window.bx_product.instock || null;","trigger":""},{"name":"ibx_page_type","polling":"vars","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function () {\n    var pathName = window.location.pathname;\n    var url = window.location.href;\n    var productPage;\n\n    if (typeof window.jQuery === 'undefined') {\n        productPage = pathName.match('(/nightstand|/buy/|/platform-bed/)');\n    } else {\n        productPage = jQuery('div[class*=Purchaser],section[class*=PDP]').length > 0 || jQuery('title').text().indexOf('Nap Pillow') > -1 || jQuery('title').text().indexOf('Bed Frame') > -1 || pathName.match('(/nightstand|/buy/|/platform-bed/)');\n    }\n\n    var homePaths = ['/ca/en/','/','/ca/fr/','/de/de/','/fr/fr/','/at/de/','/ch/de/','/ch/fr/','/uk/en/'];\n    var categoryPaths = ['/ca/en/mattresses/', '/mattresses/', '/ca/en/products/', '/products/', '/ca/fr/matelas/', '/ca/fr/produits/', '/de/de/matratzen/', '/fr/fr/matelas/', '/at/de/matratzen/', '/ch/de/matratzen/', '/ch/fr/matelas/', '/uk/en/mattresses/', '/adjustable-bed-frames/', '/mattresses-p/'];\n    var blogPage = url.indexOf('blog.') > -1;\n    var faqsPage = url.indexOf('faqs') > -1;\n    var homePage = homePaths.indexOf(pathName) > -1;\n    var categoryPage = categoryPaths.indexOf(pathName) > -1 || (pathName.indexOf('/bedding/') > -1 && pathName.indexOf('/buy/') === -1) || (pathName.indexOf('/bed-frames/') > -1 && pathName.indexOf('/buy/') === -1) ;\n    var cartPage = window.__STORE__.order.currentCheckoutStep !== undefined;\n    var otherNotTrackedPage = window.location.pathname.indexOf('/reviews/') > -1 || window.location.pathname.indexOf('/avis/') > -1 || window.location.pathname.indexOf('/account') > -1 || window.location.pathname.indexOf('/returns') > -1 || window.location.pathname.indexOf('/mattress-size-comparison-guide') > -1|| window.location.pathname.indexOf('/login') > -1;\n\n\tif (productPage && !faqsPage && !blogPage && !homePage && !categoryPage && !cartPage && !otherNotTrackedPage) {\n\t\treturn 'product';\n\t} else if (blogPage) {\n\t    return 'blog';\n\t} else if (homePage) {\n\t\treturn 'home';\n\t} else if (categoryPage) {\n        return 'category';\n    } else if (otherNotTrackedPage){\n        return false;\n    } else if (cartPage){\n        return 'cart';\n    }\n})();\n","trigger":""},{"name":"casper_value_supress_promo","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"window.localStorage.getItem('suppress-promo') ? true : false;","trigger":""},{"name":"zip_code_tracked","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"window.fastlyGeo.postal_code;","trigger":""},{"name":"session_vid","polling":"none","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"/* needed for session_count */\nnull;","trigger":""},{"name":"session_count","polling":"none","persist":"permanent","page_types":[],"testmode":false,"default":"0","code":"null;","trigger":""},{"name":"survey_q1","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"survey_q2","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"survey_q3","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"using_edge_browser","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"bouncex.browser.edge !== false;","trigger":"pageload"},{"name":"disable_iframe_messaging","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"XD.receiveMessage = function() {return false;};","trigger":"pageload"},{"name":"curr_url","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"encodeURIComponent(window.location.href);","trigger":"pageload"},{"name":"promo_code_applied","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"(function(){\n\tvar data = window.dataLayer;\n\n\tif (data) {\n        for (var i=0; i<data.length; i++) {\n\t\t\tif (data[i].event\n\t\t\t&& data[i].event === \"Completed Order\"\n\t\t\t&& data[i].coupon\n\t\t\t&& data[i].coupon.length > 0) {\n\t\t\t\treturn true;\n\t\t\t}\n        }\n    }\n    return null;\n})();","trigger":"pageload"},{"name":"native_scroll_to_top_button","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"bcxeme","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"}],"dgu":"pixel.cdnwidget.com","dgp":false,"ba":{"enabled":0,"fbte":0},"biu":"assets.bounceexchange.com","bau":"api.bounceexchange.com","beu":"events.bouncex.net","ibx":{"tjs":"","cjs":"","miw":1,"mibcx":1,"te":1,"cart_rep":{"get":"","set":""},"ulpj":{"et_rid":"espemailid"},"cus":"","miw_exclude":""},"etjson":null,"osre":true,"osru":"osr.bounceexchange.com/v1/osr/items","checkDfp":false,"spa":0,"spatm":1,"preinit_cjs":"","cpnu":"coupons.bounceexchange.com"}
;
		bouncex.tag = 'tag3';
		bouncex.$ = window.jQuery;
		bouncex.env = 'production';
		bouncex.restrictedTlds = {"casl":{"ca":1},"gdpr":{"ad":1,"al":1,"at":1,"ax":1,"ba":1,"be":1,"bg":1,"by":1,"xn--90ais":1,"ch":1,"cy":1,"cz":1,"de":1,"dk":1,"ee":1,"es":1,"eu":1,"fi":1,"fo":1,"fr":1,"uk":1,"gb":1,"gg":1,"gi":1,"gr":1,"hr":1,"hu":1,"ie":1,"im":1,"is":1,"it":1,"je":1,"li":1,"lt":1,"lu":1,"lv":1,"mc":1,"md":1,"me":1,"mk":1,"xn--d1al":1,"mt":1,"nl":1,"no":1,"pl":1,"pt":1,"ro":1,"rs":1,"xn--90a3ac":1,"ru":1,"su":1,"xn--p1ai":1,"se":1,"si":1,"sj":1,"sk":1,"sm":1,"ua":1,"xn--j1amh":1,"va":1,"tr":1}};
		bouncex.push = function(pushData) {
			bouncex.pushedData.push(pushData);
		}
		var script = document.createElement('script');
		script.setAttribute('src', '//assets.bounceexchange.com/assets/smart-tag/versioned/ijs_all_modules_cjs_min_ae6697f005edb1254700241be1167cdb.js');

		var scriptAttrs = [{"Key":"id","Value":"c.js"},{"Key":"async","Value":"true"},{"Key":"data-gm","Value":"1"},{"Key":"data-fire","Value":"1"},{"Key":"data-wt","Value":"0"},{"Key":"data-apikey","Value":"2^HIykD"},{"Key":"data-cb","Value":"bouncex.dg.initPostDeviceGraph"},{"Key":"data-bx","Value":"1"}];
		if (scriptAttrs) {
			for (var i = 0; i < scriptAttrs.length; i++) {
				script.setAttribute(scriptAttrs[i].Key, scriptAttrs[i].Value);
			}
		}

		document.body.appendChild(script);
	}
}
if (document.readyState === "loading") {
	document.addEventListener("DOMContentLoaded", bxBootstrap);
} else {
	bxBootstrap();
}})();